
<!-- saved from url=(0030)http://www.browxy.com/userArea -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="./ajax.js.download"></script>
	<script type="text/javascript" src="./json2.js.download"></script>
	<link rel="stylesheet" type="text/css" media="screen" href="./secure.css">
	<link rel="stylesheet" type="text/css" media="screen" href="./generic.css">
	
	<style>
	
	li {
    color: red;
    font-family: Verdana;
    font-size: 1.2em;
    font-style: italic;
    font-weight: normal;
    letter-spacing: 0;
    line-height: 1.5em;
    margin-left: 0.2em;
    text-align: center;
    text-decoration: none;
    word-spacing: normal;
	}
	
	ul {
    color: #5257E3;
    font-family: Verdana;
    font-size: 0.9em;
    font-style: italic;
    font-weight: bold;
    letter-spacing: 0;
    line-height: 1.5em;
    margin-left: 0.2em;
    text-align: center;
    text-decoration: none;
    word-spacing: normal;
	}
	
	</style>
	
	<script>
	var defaultAjaxRequest = new AjaxRequest();
	function test(id) {
        parent.getCode("SavedCode",id,function(code) {parent.showCode("SavedCode",id,JSON.parse(code).name,JSON.parse(code).sourceCode)});
	}

	function updateUser(userId, userAlias) {
		defaultAjaxRequest.ajaxPOST(
	        "register/update",
	        {
		        "user.id":userId,
		        "user.alias":userAlias
		    },
	        updateUserOk,
	        updateUserFail,
	        true
	    )	
	}

	function updateUserOk(result) {
		var infoNode = document.getElementById("userinfo.message");
		removeAllChilds(infoNode);
		infoNode.appendChild(document.createTextNode("user updated"));
	}	

	function updateUserFail(status,result) {
	    var infoNode = document.getElementById("userinfo.message");
	    removeAllChilds(infoNode);
		var resultObject = JSON.parse(result);
		if (resultObject.status == "VALIDATION_FAILED") {
			var validationResult = resultObject.objects.validation;
			if (validationResult != null) {
				var ul = document.createElement("ul");
				infoNode.appendChild(ul);
			}	
	        for(var key in validationResult) {
	            var attrValue = validationResult[key];
	            var textObject = document.createTextNode(attrValue[0].message)
	                var li = document.createElement("li");
	                li.appendChild(textObject);
	                ul.appendChild(li);
	        }
		}
	}

	function removeAllChilds(node) {
	    while (node.firstChild) {
	        node.removeChild(node.firstChild);
        }
	}	

	</script>
</head>
<body>
<div class="subMenuHeader"><div class="subMenuHeaderText">User Area</div></div>
<br>
<center>
<input id="logoutButton" type="button" value="logout" onclick="javascript:window.open(&#39;/logout&#39;,&#39;_self&#39;)"><br><br>

<div class="subMenuHeader"><div class="subMenuHeaderText">User Info</div></div>
<br>
<div id="userinfo.message" class="error2"></div>
<input type="hidden" name="user.id" value="74817">
<table>
<tbody><tr>
<td>alias:</td>
<td><input type="text" id="user.alias" name="user.alias" value="mshahrasbi"></td>
<td><input type="button" onclick="javascript:updateUser(74817,document.getElementById(&#39;user.alias&#39;).value);" value="Change"></td>
</tr>
</tbody></table>
<br>


<div class="subMenuHeader"><div class="subMenuHeaderText">Saved Programs</div></div>
<br>
<br>

<table class="userArea">
<tbody><tr><th align="center">Program Name</th><th align="center">Actions</th></tr>


</tbody></table>

</center>
<script>
//FIXME Find a better way to refresh the combo
if (parent.getUIType() == "standard") {
	parent.refreshSavedComboForStandardVersionIfNeeded();
}
</script>

</body></html>